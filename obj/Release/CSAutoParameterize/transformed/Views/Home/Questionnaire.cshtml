
@{
    ViewBag.Title = "Questionnaire";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

    <div class="jumbotronmodify container">
        <div id="wrapper">
            <h3>What kind of computer scientist are you?</h3>
            <p>Take this questionnaire to find out!</p>

            <form id="quiz">
                <!-- Question 1 -->
                <h4>Choose your industry</h4>
                <!-- Here are the choices for the first question. Each input tag must have the same name. For this question, the name is q1. -->
                <!-- The value is which answer the choice corresponds to. -->
                <label>
                    <input type="radio" name="Industry" value="Manufacturing">
                    Manufacturing
                </label><br />
                <label>
                    <input type="radio" name="Industry" value="Mining">
                    Mining
                </label><br />
                <label>
                    <input type="radio" name="Industry" value="Construction">
                    Construction
                </label><br />


                <!-- Question 2 -->
                <h4>Do you have any of these symptoms?</h4>
                <!-- Here are the choices for the second question. Notice how each input tag has the same name (q2), but a different name than the previous question. -->
                <label>
                    <input type="checkbox" name="Symptoms" value="Chest Pain">
                    Chest Pain
                </label><br />
                <label>
                    <input type="checkbox" name="Symptoms" value="Wheezing">
                    Wheezing
                </label><br />
                <label>
                    <input type="checkbox" name="Symptoms" value="Coughing">
                    Coughing
                </label><br />
                <label>
                    <input type="checkbox" name="Symptoms" value="Shortness of breath">
                    Shortness of breath
                </label><br />


                <!-- Question 3 -->
                <h4>Do your symptoms get better when you are away from work ?</h4>
                <!-- Choices for the third question -->
                <label>
                    <input type="radio" name="Condition" value="Yes">
                    Yes
                </label><br />
                <label>
                    <input type="radio" name="Condition" value="No">
                    No
                </label><br />
                <label>
                    <input type="radio" name="Condition" value="Not Applicable">
                    Not Applicable
                </label><br />


                <!-- Question 4 -->
                <h4>How long have you been working in the industry?</h4>
                <!-- Choices for the fourth question -->
                <label>
                    <input type="radio" name="q4" value="c1">
                    less than 1 year
                </label><br />
                <label>
                    <input type="radio" name="q4" value="c2">
                    1-5 years
                </label><br />
                <label>
                    <input type="radio" name="q4" value="c3">
                    6-10 years
                </label><br />
                <label>
                    <input type="radio" name="q4" value="c4">
                    10-20 years
                </label><br />
                <label>
                    <input type="radio" name="q5" value="c5">
                    20+ years
                </label><br />


                <h4>Do you smoke?</h4>
                <!-- Choices for the third question -->
                <label>
                    <input type="radio" name="Smoke" value="Yes">
                    Yes
                </label><br />
                <label>
                    <input type="radio" name="Smoke" value="No">
                    No
                </label><br />



                <button type="submit" id="submit">Submit</button>
                <button type="reset" id="reset">Reset</button>
            </form>


            <div id="answer">Few of the recommendations for you <br /></div>
            <div class="alert alert-dismissible alert-warning" id="smoker" style="display:none">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <h4 class="alert-heading">Warning!</h4>
                <p class="mb-0">Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
            </div>
            <div class="col-lg-9 col-md-12" id="image" style="display:none">
                <img src="~/Images/prevention.png" alt="">
            </div>
        </div>
        </div>

        <script>
           
            
            $('#quiz').on('submit', function (event) {
                event.preventDefault();
                var answerbox = document.getElementById('answer');
                var array = [];
                $("input:checked").each(function () {

                    if (this.name === 'Symptoms') {


                        array.push(this.value);
                    }
                    if (this.name === 'Industry') {


                        array.push(this.value);
                    }
                    if (this.name === 'Smoke') {
                        $('#smoker').show();
                    } 

                });
        
       
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: '@Url.Action("Question", "Questions")',
            data: { 'data': array },
            success: function (response) {
                if (response.list) {
                    for (let i = 0; i < response.list.length; i++) {

                        var link = $("<a>");
                        link.attr("href", "~/Home/"+response.list[i]);
                        link.text(response.list[i]);
                        link.attr("target","_blank")
                        //link.type("button");
                        link.addClass("btn btn-primary");

                        $("#answer").append(link);


                        // $("#answer").append("<a type=button href=# class='btn btn-primary'>" +
                        //  response.list[i]+ "</a>");
                        //  }


                    }
                   $('#image').show();
                    alert('yes');

                }
            }
        });


        // $.get('/QuestionsController/Question', {'data':array}, function (response) {
        // console.log(response);
        // if(response.list) //same result variable we are returning from controller.
        //{
        //     // Let the user download the file he/she requested
        //     console.log("hi");
        //} else {
        //     alert("There is no file assigned to this employee.");
        //     }
    });




        </script>
